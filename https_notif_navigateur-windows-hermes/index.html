<!DOCTYPE html>
<html lang="fr">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>3D Logo Animation</title>
	<link rel="icon" type="image/x-icon" href="./favicon.ico">
	<style>
		body {
			margin: 0;
			height: 2000px;
		}

		canvas {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
		}
	</style>
	<script type="importmap">
        {
          "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.167.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.167.0/examples/jsm/"
          }
        }
    </script>
</head>

<body>
	<script type="module">
		import * as THREE from 'three';
		import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';

		const scene = new THREE.Scene();
		const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
		const renderer = new THREE.WebGLRenderer({ alpha: true });
		renderer.setSize(window.innerWidth, window.innerHeight);
		document.body.appendChild(renderer.domElement);

		// Chargement du modèle 3D
		const loader = new GLTFLoader();
		let logo;
		loader.load('./logo_3d_fimainfo.glb', (gltf) => {
			logo = gltf.scene;
			scene.add(logo);
			logo.position.set(0, 0, 0);
			logo.scale.set(1, 1, 1);
		}, undefined, (error) => {
			console.error('Erreur de chargement du modèle :', error);
		});

		camera.position.z = 5;

		// Éclairage
		const light = new THREE.AmbientLight(0xffffff, 0.8);
		scene.add(light);
		const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
		directionalLight.position.set(0, 1, 1);
		scene.add(directionalLight);

		// Animation à l'ouverture
		function animate() {
			requestAnimationFrame(animate);
			if (logo) {
				logo.rotation.y += 0.01;
			}
			renderer.render(scene, camera);
		}
		animate();

		// Réaction au défilement
		window.addEventListener('scroll', () => {
			if (logo) {
				const scrollY = window.scrollY;
				logo.position.y = -scrollY * 0.002;
				logo.rotation.x = scrollY * 0.001;
				logo.scale.set(1 + scrollY * 0.0002, 1 + scrollY * 0.0002, 1);
			}
		});

		// Adaptation à la taille de la fenêtre
		window.addEventListener('resize', () => {
			camera.aspect = window.innerWidth / window.innerHeight;
			camera.updateProjectionMatrix();
			renderer.setSize(window.innerWidth, window.innerHeight);
		});
	</script>
</body>

</html>